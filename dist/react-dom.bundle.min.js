!function(n){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).HaikuReactAdapter=n()}}(function(){return function n(t,o,e){function r(a,s){if(!o[a]){if(!t[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(i)return i(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=o[a]={exports:{}};t[a][0].call(c.exports,function(n){var o=t[a][1][n];return r(o||n)},c,c.exports,n,t,o,e)}return o[a].exports}for(var i="function"==typeof require&&require,a=0;a<e.length;a++)r(e[a]);return r}({1:[function(n,t,o){function e(n,t,o){return{shown:!0,opacity:1,mount:{x:n||0,y:t||0,z:o||0},align:{x:n||0,y:t||0,z:o||0},origin:{x:n||0,y:t||0,z:o||0},translation:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0,w:0},scale:{x:1,y:1,z:1},sizeMode:{x:l,y:l,z:l},sizeProportional:{x:1,y:1,z:1},sizeDifferential:{x:0,y:0,z:0},sizeAbsolute:{x:0,y:0,z:0}}}function r(){return i([],f)}function i(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n}function a(n,t,o){return n[0]=t[0]*o[0]+t[1]*o[4]+t[2]*o[8]+t[3]*o[12],n[1]=t[0]*o[1]+t[1]*o[5]+t[2]*o[9]+t[3]*o[13],n[2]=t[0]*o[2]+t[1]*o[6]+t[2]*o[10]+t[3]*o[14],n[3]=t[0]*o[3]+t[1]*o[7]+t[2]*o[11]+t[3]*o[15],n[4]=t[4]*o[0]+t[5]*o[4]+t[6]*o[8]+t[7]*o[12],n[5]=t[4]*o[1]+t[5]*o[5]+t[6]*o[9]+t[7]*o[13],n[6]=t[4]*o[2]+t[5]*o[6]+t[6]*o[10]+t[7]*o[14],n[7]=t[4]*o[3]+t[5]*o[7]+t[6]*o[11]+t[7]*o[15],n[8]=t[8]*o[0]+t[9]*o[4]+t[10]*o[8]+t[11]*o[12],n[9]=t[8]*o[1]+t[9]*o[5]+t[10]*o[9]+t[11]*o[13],n[10]=t[8]*o[2]+t[9]*o[6]+t[10]*o[10]+t[11]*o[14],n[11]=t[8]*o[3]+t[9]*o[7]+t[10]*o[11]+t[11]*o[15],n[12]=t[12]*o[0]+t[13]*o[4]+t[14]*o[8]+t[15]*o[12],n[13]=t[12]*o[1]+t[13]*o[5]+t[14]*o[9]+t[15]*o[13],n[14]=t[12]*o[2]+t[13]*o[6]+t[14]*o[10]+t[15]*o[14],n[15]=t[12]*o[3]+t[13]*o[7]+t[14]*o[11]+t[15]*o[15],n}function s(n,t,o,e,r,i,a){var s=o.translation.x,u=o.translation.y,l=o.translation.z,c=o.rotation.x,p=o.rotation.y,f=o.rotation.z,h=o.rotation.w,y=o.scale.x,d=o.scale.y,m=o.scale.z,x=o.align.x*a.x,v=o.align.y*a.y,g=o.align.z*a.z,M=o.mount.x*r.x,z=o.mount.y*r.y,T=o.mount.z*r.z,C=o.origin.x*r.x,w=o.origin.y*r.y,D=o.origin.z*r.z,E=h*c,P=h*p,S=h*f,b=c*c,O=p*p,A=f*f,k=c*p,W=c*f,L=p*f,R=(1-2*(O+A))*y,U=2*(k+S)*y,N=2*(W-P)*y,q=2*(k-S)*d,F=(1-2*(b+A))*d,I=2*(L+E)*d,H=2*(W+P)*m,_=2*(L-E)*m,B=(1-2*(b+O))*m,j=x+s-M+C-(R*C+q*w+H*D),K=v+u-z+w-(U*C+F*w+_*D),V=g+l-T+D-(N*C+I*w+B*D);return t.align={x:x,y:v,z:g},t.mount={x:M,y:z,z:T},t.origin={x:C,y:w,z:D},t.offset={x:j,y:K,z:V},n[0]=i[0]*R+i[4]*U+i[8]*N,n[1]=i[1]*R+i[5]*U+i[9]*N,n[2]=i[2]*R+i[6]*U+i[10]*N,n[3]=0,n[4]=i[0]*q+i[4]*F+i[8]*I,n[5]=i[1]*q+i[5]*F+i[9]*I,n[6]=i[2]*q+i[6]*F+i[10]*I,n[7]=0,n[8]=i[0]*H+i[4]*_+i[8]*B,n[9]=i[1]*H+i[5]*_+i[9]*B,n[10]=i[2]*H+i[6]*_+i[10]*B,n[11]=0,n[12]=i[0]*j+i[4]*K+i[8]*V,n[13]=i[1]*j+i[5]*K+i[9]*V,n[14]=i[2]*j+i[6]*K+i[10]*V,n[15]=1,n}function u(n,t,o,e){for(var r=0;r<y.length;r++){var i=y[r];switch(o[i]){case l:var a=t.sizeProportional[i],s=t.sizeDifferential[i];n[i]=e[i]*a+s;break;case c:n[i]=t.sizeAbsolute[i]}}return n}var l=0,c=1,p=0,f=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],h={THREE:3,TWO:2},y=["x","y","z"];t.exports={computeMatrix:s,multiplyArrayOfMatrices:function(n){for(var t=r(),o=0;o<n.length;o++)t=a([],t,n[o]);return t},computeLayout:function(n,t,o,e,r){r||(r={x:0,y:0,z:0}),void 0!==r.z&&null!==r.z||(r.z=p);var i=u({},t,t.sizeMode,r),a=s([],n,t,0,i,e,r);return n.size=i,n.matrix=a,n.shown=t.shown,n.opacity=t.opacity,n},createLayoutSpec:e,createBaseComputedLayout:function(n,t,o){return n||(n=0),t||(t=0),o||(o=0),{size:{x:n,y:t,z:o},matrix:r(),shown:!0,opacity:1}},computeRotationFlexibly:function(n,t,o,e,r){if(!r||null==r.x||null==r.y||null==r.z||null==r.w)throw new Error("No w-component nor quaternion provided!");if(null==n||null==t||null==o){var i=-2*(r.y*r.z-r.w*r.x);Math.abs(i)>.99999?(t=null==t?.5*Math.PI*i:t,n=null==n?Math.atan2(-r.x*r.z+r.w*r.y,.5-r.y*r.y-r.z*r.z):n,o=null==o?0:o):(t=null==t?Math.asin(i):t,n=null==n?Math.atan2(r.x*r.z+r.w*r.y,.5-r.x*r.x-r.y*r.y):n,o=null==o?Math.atan2(r.x*r.y+r.w*r.z,.5-r.x*r.x-r.z*r.z):o)}var a=.5*n,s=.5*t,u=.5*o,l=Math.sin(a),c=Math.sin(s),p=Math.sin(u),f=Math.cos(a),h=Math.cos(s),y=Math.cos(u),d=c*p,m=h*p,x=c*y,v=h*y;return{x:l*v+f*d,y:f*x-l*m,z:f*m+l*x,w:f*v-l*d}},createMatrix:r,FORMATS:h,SIZE_ABSOLUTE:c,SIZE_PROPORTIONAL:l,ATTRIBUTES:e(),multiplyMatrices:a,transposeMatrix:function(n,t){return n[0]=t[0],n[1]=t[4],n[2]=t[8],n[3]=t[12],n[4]=t[1],n[5]=t[5],n[6]=t[9],n[7]=t[13],n[8]=t[2],n[9]=t[6],n[10]=t[10],n[11]=t[14],n[12]=t[3],n[13]=t[7],n[14]=t[11],n[15]=t[15],n},copyMatrix:i,isZero:function(n){return n>-1e-6&&n<1e-6}}},{}],2:[function(n,t,o){for(var e={},r=["onAbort","onAnimationEnd","onAnimationIteration","onAnimationStart","onBlur","onCanPlay","onCanPlayThrough","onChange","onClick","onCompositionEnd","onCompositionStart","onCompositionUpdate","onContextMenu","onCopy","onCut","onDoubleClick","onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onFocus","onInput","onKeyDown","onKeyPress","onKeyUp","onLoad","onLoadedData","onLoadedMetadata","onLoadStart","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onPaste","onPause","onPlay","onPlaying","onProgress","onRateChange","onScroll","onSeeked","onSeeking","onSelect","onStalled","onSubmit","onSuspend","onTimeUpdate","onTouchCancel","onTouchEnd","onTouchMove","onTouchStart","onTransitionEnd","onVolumeChange","onWaiting","onWheel"],i=0;i<r.length;i++){var a=r[i];e[a]="func",e[a+"Capture"]="func"}t.exports=e},{}],3:[function(n,t,o){function e(n,t){for(var o in t){var e=t[o];n[o]=e}}function r(n,t){return n&&t?void e(n,t):null}function i(n,t,o){var e=u({},o,{ref:n.refs.container,vanities:{"controlFlow.insert":function(n,t,o,e,r){var i=s.create(t).toJSON(),a=p(i);f(a,n),r(n,a,o,e)},"controlFlow.placeholder":function(n,t,o,e,r){var i=s.create(t).toJSON(),a=p(i);f(a,n),r(n,a,o,e)}}});n.haikuPlayer=t(n.refs.container,e),n.haikuPlayer.hear(function(t,o){n.props&&n.props.events&&n.props.events[t]&&n.props.events[t](o)})}var a=require("react"),s=require("react-test-renderer"),u=require("lodash.merge"),l=n("./ValidProps"),c=n("./EventsDict"),p=n("./../../helpers/reactToMana"),f=n("./../../helpers/initializeTreeAttributes");t.exports=function(n){function t(t,o){return function(t,e){return o.call(this,t,e,n.component.instance)}.bind(t)}var o=a.createClass({displayName:"HaikuCreation",getInitialState:function(){return this.haiku=n,{}},componentWillReceiveProps:function(n){this.props.controller&&this.props.controller.emit("react:componentWillReceiveProps",this,n),r(this.haikuPlayer,n)},componentWillMount:function(){this.props.controller&&this.props.controller.emit("react:componentWillMount",this),this.props.onComponentWillMount&&this.props.onComponentWillMount(this)},componentWillUnmount:function(){this.props.controller&&this.props.controller.emit("react:componentWillUnmount",this),this.props.onComponentWillUnmount&&this.props.onComponentWillUnmount(this)},componentDidMount:function(){i(this,n,this.props),this.props.controller&&this.props.controller.emit("react:componentDidMount",this,this.refs.container),this.props.onComponentDidMount&&this.props.onComponentDidMount(this,this.refs.container),r(this.haikuPlayer,this.props)},render:function(){var n={};for(var o in this.props){var e=this.props[o];l[o]&&(c[o]?n[o]=t(this,e):n[o]=e)}return a.createElement(this.props.tagName||"div",u({ref:"container",style:{position:"relative",margin:0,padding:0,border:0,width:"100%",height:"100%"}},n))}});o.haiku=n,o.propTypes={tagName:a.PropTypes.string};for(var e in l){var s=l[e];o.propTypes[e]=a.PropTypes[s]}return o}},{"./../../helpers/initializeTreeAttributes":6,"./../../helpers/reactToMana":8,"./EventsDict":2,"./ValidProps":4,"lodash.merge":"lodash.merge",react:"react","react-test-renderer":"react-test-renderer"}],4:[function(n,t,o){var e=n("./EventsDict"),r={id:"string",className:"string",style:"object",width:"string",height:"string",onComponentWillMount:"func",onComponentWillUnmount:"func",onComponentDidMount:"func"};for(var i in e)r[i]=e[i];t.exports=r},{"./EventsDict":2}],5:[function(n,t,o){t.exports=n("./HaikuReactDOMAdapter")},{"./HaikuReactDOMAdapter":3}],6:[function(n,t,o){function e(n,t){return n.attributes||(n.attributes={}),n.attributes.style||(n.attributes.style={}),n.layout||(n.layout=r.createLayoutSpec(),n.layout.matrix=r.createMatrix(),n.layout.format=i[n.elementName]?r.FORMATS.TWO:r.FORMATS.THREE),n}var r=n("./../Layout3D"),i={circle:!0,ellipse:!0,foreignObject:!0,g:!0,image:!0,line:!0,mesh:!0,path:!0,polygon:!0,polyline:!0,rect:!0,svg:!0,switch:!0,symbol:!0,text:!0,textPath:!0,tspan:!0,unknown:!0,use:!0};t.exports=function n(t,o){if(t&&"string"!=typeof t&&(e(t),t.__parent=o,t.children&&!(t.children.length<1)))for(var r=0;r<t.children.length;r++)n(t.children[r],t)}},{"./../Layout3D":1}],7:[function(n,t,o){var e=n("./reactToMana");t.exports=function(n){return n?n.length<1?null:n.map(function(n){return"string"==typeof n?n:e(n)}):null}},{"./reactToMana":8}],8:[function(n,t,o){function e(n){var t={};for(var o in n.props)"children"!==o&&(t[o]=n.props[o]);var a,s=n.props.children||n.children;return Array.isArray(s)?a=i(s):s&&s.type?a=[e(s)]:typeof s===r&&(a=[s]),{elementName:n.type,attributes:t,children:a}}var r="string";t.exports=e;var i=n("./reactChildrenToMana")},{"./reactChildrenToMana":7}]},{},[5])(5)});
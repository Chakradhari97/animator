!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).HaikuReactAdapter=t()}}(function(){return function t(n,o,e){function r(a,u){if(!o[a]){if(!n[a]){var s="function"==typeof require&&require;if(!u&&s)return s(a,!0);if(i)return i(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var p=o[a]={exports:{}};n[a][0].call(p.exports,function(t){var o=n[a][1][t];return r(o||t)},p,p.exports,t,n,o,e)}return o[a].exports}for(var i="function"==typeof require&&require,a=0;a<e.length;a++)r(e[a]);return r}({1:[function(t,n,o){function e(t,n){return t.attributes||(t.attributes={}),t.attributes.style||(t.attributes.style={}),t.layout||(t.layout=i(),t.layout.matrix=a(),t.layout.format=h[t.elementName]?d.TWO:d.THREE),t}function r(t,n){if(t&&"string"!=typeof t&&(e(t,n),t.__parent=n,t.children&&!(t.children.length<1)))for(var o=0;o<t.children.length;o++)r(t.children[o],t)}function i(t,n,o){return{shown:!0,opacity:1,mount:{x:t||0,y:n||0,z:o||0},align:{x:t||0,y:n||0,z:o||0},origin:{x:t||0,y:n||0,z:o||0},translation:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0,w:0},scale:{x:1,y:1,z:1},sizeMode:{x:f,y:f,z:f},sizeProportional:{x:1,y:1,z:1},sizeDifferential:{x:0,y:0,z:0},sizeAbsolute:{x:0,y:0,z:0}}}function a(){return u([],m)}function u(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t}function s(t,n,o){return t[0]=n[0]*o[0]+n[1]*o[4]+n[2]*o[8]+n[3]*o[12],t[1]=n[0]*o[1]+n[1]*o[5]+n[2]*o[9]+n[3]*o[13],t[2]=n[0]*o[2]+n[1]*o[6]+n[2]*o[10]+n[3]*o[14],t[3]=n[0]*o[3]+n[1]*o[7]+n[2]*o[11]+n[3]*o[15],t[4]=n[4]*o[0]+n[5]*o[4]+n[6]*o[8]+n[7]*o[12],t[5]=n[4]*o[1]+n[5]*o[5]+n[6]*o[9]+n[7]*o[13],t[6]=n[4]*o[2]+n[5]*o[6]+n[6]*o[10]+n[7]*o[14],t[7]=n[4]*o[3]+n[5]*o[7]+n[6]*o[11]+n[7]*o[15],t[8]=n[8]*o[0]+n[9]*o[4]+n[10]*o[8]+n[11]*o[12],t[9]=n[8]*o[1]+n[9]*o[5]+n[10]*o[9]+n[11]*o[13],t[10]=n[8]*o[2]+n[9]*o[6]+n[10]*o[10]+n[11]*o[14],t[11]=n[8]*o[3]+n[9]*o[7]+n[10]*o[11]+n[11]*o[15],t[12]=n[12]*o[0]+n[13]*o[4]+n[14]*o[8]+n[15]*o[12],t[13]=n[12]*o[1]+n[13]*o[5]+n[14]*o[9]+n[15]*o[13],t[14]=n[12]*o[2]+n[13]*o[6]+n[14]*o[10]+n[15]*o[14],t[15]=n[12]*o[3]+n[13]*o[7]+n[14]*o[11]+n[15]*o[15],t}var l=t("./layout/computeMatrix"),p=t("./layout/computeRotationFlexibly"),c=t("./layout/computeSize"),h={circle:!0,ellipse:!0,foreignObject:!0,g:!0,image:!0,line:!0,mesh:!0,path:!0,polygon:!0,polyline:!0,rect:!0,svg:!0,switch:!0,symbol:!0,text:!0,textPath:!0,tspan:!0,unknown:!0,use:!0},f=0,y=0,m=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],d={THREE:3,TWO:2};n.exports={computeMatrix:l,multiplyArrayOfMatrices:function(t){for(var n=a(),o=0;o<t.length;o++)n=s([],n,t[o]);return n},computeLayout:function(t,n,o,e,r){r||(r={x:0,y:0,z:0}),void 0!==r.z&&null!==r.z||(r.z=y);var i=c({},n,n.sizeMode,r),a=l([],t,n,o,i,e,r);return t.size=i,t.matrix=a,t.shown=n.shown,t.opacity=n.opacity,t},createLayoutSpec:i,createBaseComputedLayout:function(t,n,o){return t||(t=0),n||(n=0),o||(o=0),{size:{x:t,y:n,z:o},matrix:a(),shown:!0,opacity:1}},computeRotationFlexibly:p,createMatrix:a,FORMATS:d,SIZE_ABSOLUTE:1,SIZE_PROPORTIONAL:f,ATTRIBUTES:i(),multiplyMatrices:s,transposeMatrix:function(t,n){return t[0]=n[0],t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=n[1],t[5]=n[5],t[6]=n[9],t[7]=n[13],t[8]=n[2],t[9]=n[6],t[10]=n[10],t[11]=n[14],t[12]=n[3],t[13]=n[7],t[14]=n[11],t[15]=n[15],t},copyMatrix:u,initializeTreeAttributes:r,initializeNodeAttributes:e,isZero:function(t){return t>-1e-6&&t<1e-6}}},{"./layout/computeMatrix":8,"./layout/computeRotationFlexibly":9,"./layout/computeSize":10}],2:[function(t,n,o){for(var e={},r=["onAbort","onAnimationEnd","onAnimationIteration","onAnimationStart","onBlur","onCanPlay","onCanPlayThrough","onChange","onClick","onCompositionEnd","onCompositionStart","onCompositionUpdate","onContextMenu","onCopy","onCut","onDoubleClick","onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onFocus","onInput","onKeyDown","onKeyPress","onKeyUp","onLoad","onLoadedData","onLoadedMetadata","onLoadStart","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onPaste","onPause","onPlay","onPlaying","onProgress","onRateChange","onScroll","onSeeked","onSeeking","onSelect","onStalled","onSubmit","onSuspend","onTimeUpdate","onTouchCancel","onTouchEnd","onTouchMove","onTouchStart","onTransitionEnd","onVolumeChange","onWaiting","onWheel"],i=0;i<r.length;i++){var a=r[i];e[a]="func",e[a+"Capture"]="func"}n.exports=e},{}],3:[function(t,n,o){var e=require("react"),r=require("react-test-renderer"),i=t("./ValidProps"),a=t("./EventsDict"),u=require("lodash.merge"),s=t("./../../helpers/reactToMana"),l=t("./../../Layout3D");n.exports=function(t){var n=e.createClass({displayName:"HaikuComponent",getInitialState:function(){return{}},componentWillReceiveProps:function(t){this.props.controller&&this.props.controller.emit("react:componentWillReceiveProps",this,t),this.applyInputs(t)},componentWillMount:function(){this.props.controller&&this.props.controller.emit("react:componentWillMount",this),this.props.onComponentWillMount&&this.props.onComponentWillMount(this)},componentWillUnmount:function(){this.props.controller&&this.props.controller.emit("react:componentWillUnmount",this),this.props.onComponentWillUnmount&&this.props.onComponentWillUnmount(this),this.haiku&&this.haiku.callUnmount()},componentDidMount:function(){this.mount&&(this.createContext(this.props),this.props.controller&&this.props.controller.emit("react:componentDidMount",this,this.mount),this.props.onComponentDidMount&&this.props.onComponentDidMount(this,this.mount),this.applyInputs(this.props))},createContext:function(n){var o=u({},n,{ref:this.mount,vanities:{"controlFlow.insert":function(t,n,o,e,i){var a=r.create(n).toJSON(),u=s(a);l.initializeTreeAttributes(u,t),i(t,u,o,e)},"controlFlow.placeholder":function(t,n,o,e,i){var a=r.create(n).toJSON(),u=s(a);l.initializeTreeAttributes(u,t),i(t,u,o,e)}}});this.haiku?this.haiku.callRemount(o):(this.haiku=t(this.mount,o),this.haiku.hear(function(t,n){this.props&&this.props.events&&this.props.events[t]&&this.props.events[t](n)}))},applyInputs:function(t){if(!t)return null;if(!this.haiku)return null;for(var n in t){var o=t[n];this.haiku[n]=o}},createEventPropWrapper:function(n){return function(o,e){return n.call(this,o,e,t.component)}.bind(this)},render:function(){var t={};for(var n in this.props){var o=this.props[n];i[n]&&(a[n]?t[n]=this.createEventPropWrapper(o):t[n]=o)}return e.createElement(this.props.tagName||"div",u({ref:function(t){this.mount=t}.bind(this),style:{position:"relative",margin:0,padding:0,border:0,width:"100%",height:"100%"}},t))}});n.propTypes={tagName:e.PropTypes.string};for(var o in i){var p=i[o];n.propTypes[o]=e.PropTypes[p]}return n}},{"./../../Layout3D":1,"./../../helpers/reactToMana":7,"./EventsDict":2,"./ValidProps":4,"lodash.merge":"lodash.merge",react:"react","react-test-renderer":"react-test-renderer"}],4:[function(t,n,o){var e=t("./EventsDict"),r={id:"string",className:"string",style:"object",width:"string",height:"string",onComponentWillMount:"func",onComponentWillUnmount:"func",onComponentDidMount:"func"};for(var i in e)r[i]=e[i];n.exports=r},{"./EventsDict":2}],5:[function(t,n,o){n.exports=t("./HaikuReactDOMAdapter")},{"./HaikuReactDOMAdapter":3}],6:[function(t,n,o){var e=t("./reactToMana");n.exports=function(t){return t?t.length<1?null:t.map(function(t){return"string"==typeof t?t:e(t)}):null}},{"./reactToMana":7}],7:[function(t,n,o){function e(t){var n={};for(var o in t.props)"children"!==o&&(n[o]=t.props[o]);var a,u=t.props.children||t.children;return Array.isArray(u)?a=i(u):u&&u.type?a=[e(u)]:typeof u===r&&(a=[u]),{elementName:t.type,attributes:n,children:a}}var r="string";n.exports=e;var i=t("./reactChildrenToMana")},{"./reactChildrenToMana":6}],8:[function(t,n,o){n.exports=function(t,n,o,e,r,i,a){var u=o.translation.x,s=o.translation.y,l=o.translation.z,p=o.rotation.x,c=o.rotation.y,h=o.rotation.z,f=o.rotation.w,y=o.scale.x,m=o.scale.y,d=o.scale.z,x=o.align.x*a.x,v=o.align.y*a.y,g=o.align.z*a.z,z=o.mount.x*r.x,M=o.mount.y*r.y,C=o.mount.z*r.z,T=o.origin.x*r.x,w=o.origin.y*r.y,D=o.origin.z*r.z,E=f*p,b=f*c,S=f*h,P=p*p,A=c*c,O=h*h,k=p*c,W=p*h,R=c*h,L=(1-2*(A+O))*y,U=2*(k+S)*y,N=2*(W-b)*y,I=2*(k-S)*m,q=(1-2*(P+O))*m,F=2*(R+E)*m,H=2*(W+b)*d,_=2*(R-E)*d,B=(1-2*(P+A))*d,j=x+u-z+T-(L*T+I*w+H*D),K=v+s-M+w-(U*T+q*w+_*D),V=g+l-C+D-(N*T+F*w+B*D);return n.align={x:x,y:v,z:g},n.mount={x:z,y:M,z:C},n.origin={x:T,y:w,z:D},n.offset={x:j,y:K,z:V},t[0]=i[0]*L+i[4]*U+i[8]*N,t[1]=i[1]*L+i[5]*U+i[9]*N,t[2]=i[2]*L+i[6]*U+i[10]*N,t[3]=0,t[4]=i[0]*I+i[4]*q+i[8]*F,t[5]=i[1]*I+i[5]*q+i[9]*F,t[6]=i[2]*I+i[6]*q+i[10]*F,t[7]=0,t[8]=i[0]*H+i[4]*_+i[8]*B,t[9]=i[1]*H+i[5]*_+i[9]*B,t[10]=i[2]*H+i[6]*_+i[10]*B,t[11]=0,t[12]=i[0]*j+i[4]*K+i[8]*V,t[13]=i[1]*j+i[5]*K+i[9]*V,t[14]=i[2]*j+i[6]*K+i[10]*V,t[15]=1,t}},{}],9:[function(t,n,o){n.exports=function(t,n,o,e,r){if(!r||null==r.x||null==r.y||null==r.z||null==r.w)throw new Error("No w-component nor quaternion provided!");if(null==t||null==n||null==o){var i=-2*(r.y*r.z-r.w*r.x);Math.abs(i)>.99999?(n=null==n?.5*Math.PI*i:n,t=null==t?Math.atan2(-r.x*r.z+r.w*r.y,.5-r.y*r.y-r.z*r.z):t,o=null==o?0:o):(n=null==n?Math.asin(i):n,t=null==t?Math.atan2(r.x*r.z+r.w*r.y,.5-r.x*r.x-r.y*r.y):t,o=null==o?Math.atan2(r.x*r.y+r.w*r.z,.5-r.x*r.x-r.z*r.z):o)}var a=.5*t,u=.5*n,s=.5*o,l=Math.sin(a),p=Math.sin(u),c=Math.sin(s),h=Math.cos(a),f=Math.cos(u),y=Math.cos(s),m=p*c,d=f*c,x=p*y,v=f*y;return{x:l*v+h*m,y:h*x-l*d,z:h*d+l*x,w:h*v-l*m}}},{}],10:[function(t,n,o){var e=0,r=1,i=["x","y","z"];n.exports=function(t,n,o,a){for(var u=0;u<i.length;u++){var s=i[u];switch(o[s]){case e:var l=n.sizeProportional[s],p=n.sizeDifferential[s];t[s]=a[s]*l+p;break;case r:t[s]=n.sizeAbsolute[s]}}return t}},{}]},{},[5])(5)});
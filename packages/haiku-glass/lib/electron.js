'use strict';

var qs = require('qs');
var electron = require('electron');
var app = electron.app;
var BrowserWindow = electron.BrowserWindow;
var path = require('path');

/**
 * This file is bypassed when loaded in the full app.
 * This is only used as a harness for developin on glass standalone.
 */

var url = 'file://' + path.join(__dirname, '..', 'index.html');

var params = {
  email: 'matthew+SENTRY-TESTING-USER@haiku.ai',
  folder: process.env.HAIKU_PROJECT_FOLDER,
  plumbing: process.env.HAIKU_PLUMBING_URL
};

if (process.env.MOCK_ENVOY === '1') {
  params.envoy = { mock: true };
}

console.info('[glass] launching window with params', params);

var query = qs.stringify(params);

url = url + '?' + query;

var mainWindow = void 0;

function createWindow() {
  mainWindow = new BrowserWindow({ width: 1200, height: 800 });
  mainWindow.loadURL(url);

  if (process.env.DEV === '1') {
    mainWindow.webContents.openDevTools();
  }

  mainWindow.on('closed', function () {
    mainWindow = null;
  });
}

app.on('ready', createWindow);

app.on('window-all-closed', function () {
  if (process.platform !== 'darwin') {
    app.quit();
  }
});

app.on('activate', function () {
  if (mainWindow === null) {
    createWindow();
  }
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9lbGVjdHJvbi5qcyJdLCJuYW1lcyI6WyJxcyIsInJlcXVpcmUiLCJlbGVjdHJvbiIsImFwcCIsIkJyb3dzZXJXaW5kb3ciLCJwYXRoIiwidXJsIiwiam9pbiIsIl9fZGlybmFtZSIsInBhcmFtcyIsImVtYWlsIiwiZm9sZGVyIiwicHJvY2VzcyIsImVudiIsIkhBSUtVX1BST0pFQ1RfRk9MREVSIiwicGx1bWJpbmciLCJIQUlLVV9QTFVNQklOR19VUkwiLCJNT0NLX0VOVk9ZIiwiZW52b3kiLCJtb2NrIiwiY29uc29sZSIsImluZm8iLCJxdWVyeSIsInN0cmluZ2lmeSIsIm1haW5XaW5kb3ciLCJjcmVhdGVXaW5kb3ciLCJ3aWR0aCIsImhlaWdodCIsImxvYWRVUkwiLCJERVYiLCJ3ZWJDb250ZW50cyIsIm9wZW5EZXZUb29scyIsIm9uIiwicGxhdGZvcm0iLCJxdWl0Il0sIm1hcHBpbmdzIjoiOztBQUFBLElBQU1BLEtBQUtDLFFBQVEsSUFBUixDQUFYO0FBQ0EsSUFBTUMsV0FBV0QsUUFBUSxVQUFSLENBQWpCO0FBQ0EsSUFBTUUsTUFBTUQsU0FBU0MsR0FBckI7QUFDQSxJQUFNQyxnQkFBZ0JGLFNBQVNFLGFBQS9CO0FBQ0EsSUFBTUMsT0FBT0osUUFBUSxNQUFSLENBQWI7O0FBRUE7Ozs7O0FBS0EsSUFBSUssa0JBQWdCRCxLQUFLRSxJQUFMLENBQVVDLFNBQVYsRUFBcUIsSUFBckIsRUFBMkIsWUFBM0IsQ0FBcEI7O0FBRUEsSUFBTUMsU0FBUztBQUNiQyxTQUFPLHNDQURNO0FBRWJDLFVBQVFDLFFBQVFDLEdBQVIsQ0FBWUMsb0JBRlA7QUFHYkMsWUFBVUgsUUFBUUMsR0FBUixDQUFZRztBQUhULENBQWY7O0FBTUEsSUFBSUosUUFBUUMsR0FBUixDQUFZSSxVQUFaLEtBQTJCLEdBQS9CLEVBQW9DO0FBQ2xDUixTQUFPUyxLQUFQLEdBQWUsRUFBRUMsTUFBTSxJQUFSLEVBQWY7QUFDRDs7QUFFREMsUUFBUUMsSUFBUixDQUFhLHNDQUFiLEVBQXFEWixNQUFyRDs7QUFFQSxJQUFNYSxRQUFRdEIsR0FBR3VCLFNBQUgsQ0FBYWQsTUFBYixDQUFkOztBQUVBSCxNQUFTQSxHQUFULFNBQWdCZ0IsS0FBaEI7O0FBRUEsSUFBSUUsbUJBQUo7O0FBRUEsU0FBU0MsWUFBVCxHQUF5QjtBQUN2QkQsZUFBYSxJQUFJcEIsYUFBSixDQUFrQixFQUFFc0IsT0FBTyxJQUFULEVBQWVDLFFBQVEsR0FBdkIsRUFBbEIsQ0FBYjtBQUNBSCxhQUFXSSxPQUFYLENBQW1CdEIsR0FBbkI7O0FBRUEsTUFBSU0sUUFBUUMsR0FBUixDQUFZZ0IsR0FBWixLQUFvQixHQUF4QixFQUE2QjtBQUMzQkwsZUFBV00sV0FBWCxDQUF1QkMsWUFBdkI7QUFDRDs7QUFFRFAsYUFBV1EsRUFBWCxDQUFjLFFBQWQsRUFBd0IsWUFBWTtBQUNsQ1IsaUJBQWEsSUFBYjtBQUNELEdBRkQ7QUFHRDs7QUFFRHJCLElBQUk2QixFQUFKLENBQU8sT0FBUCxFQUFnQlAsWUFBaEI7O0FBRUF0QixJQUFJNkIsRUFBSixDQUFPLG1CQUFQLEVBQTRCLFlBQVk7QUFDdEMsTUFBSXBCLFFBQVFxQixRQUFSLEtBQXFCLFFBQXpCLEVBQW1DO0FBQ2pDOUIsUUFBSStCLElBQUo7QUFDRDtBQUNGLENBSkQ7O0FBTUEvQixJQUFJNkIsRUFBSixDQUFPLFVBQVAsRUFBbUIsWUFBWTtBQUM3QixNQUFJUixlQUFlLElBQW5CLEVBQXlCO0FBQ3ZCQztBQUNEO0FBQ0YsQ0FKRCIsImZpbGUiOiJlbGVjdHJvbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHFzID0gcmVxdWlyZSgncXMnKVxuY29uc3QgZWxlY3Ryb24gPSByZXF1aXJlKCdlbGVjdHJvbicpXG5jb25zdCBhcHAgPSBlbGVjdHJvbi5hcHBcbmNvbnN0IEJyb3dzZXJXaW5kb3cgPSBlbGVjdHJvbi5Ccm93c2VyV2luZG93XG5jb25zdCBwYXRoID0gcmVxdWlyZSgncGF0aCcpXG5cbi8qKlxuICogVGhpcyBmaWxlIGlzIGJ5cGFzc2VkIHdoZW4gbG9hZGVkIGluIHRoZSBmdWxsIGFwcC5cbiAqIFRoaXMgaXMgb25seSB1c2VkIGFzIGEgaGFybmVzcyBmb3IgZGV2ZWxvcGluIG9uIGdsYXNzIHN0YW5kYWxvbmUuXG4gKi9cblxubGV0IHVybCA9IGBmaWxlOi8vJHtwYXRoLmpvaW4oX19kaXJuYW1lLCAnLi4nLCAnaW5kZXguaHRtbCcpfWBcblxuY29uc3QgcGFyYW1zID0ge1xuICBlbWFpbDogJ21hdHRoZXcrU0VOVFJZLVRFU1RJTkctVVNFUkBoYWlrdS5haScsXG4gIGZvbGRlcjogcHJvY2Vzcy5lbnYuSEFJS1VfUFJPSkVDVF9GT0xERVIsXG4gIHBsdW1iaW5nOiBwcm9jZXNzLmVudi5IQUlLVV9QTFVNQklOR19VUkxcbn1cblxuaWYgKHByb2Nlc3MuZW52Lk1PQ0tfRU5WT1kgPT09ICcxJykge1xuICBwYXJhbXMuZW52b3kgPSB7IG1vY2s6IHRydWUgfVxufVxuXG5jb25zb2xlLmluZm8oJ1tnbGFzc10gbGF1bmNoaW5nIHdpbmRvdyB3aXRoIHBhcmFtcycsIHBhcmFtcylcblxuY29uc3QgcXVlcnkgPSBxcy5zdHJpbmdpZnkocGFyYW1zKVxuXG51cmwgPSBgJHt1cmx9PyR7cXVlcnl9YFxuXG5sZXQgbWFpbldpbmRvd1xuXG5mdW5jdGlvbiBjcmVhdGVXaW5kb3cgKCkge1xuICBtYWluV2luZG93ID0gbmV3IEJyb3dzZXJXaW5kb3coeyB3aWR0aDogMTIwMCwgaGVpZ2h0OiA4MDAgfSlcbiAgbWFpbldpbmRvdy5sb2FkVVJMKHVybClcblxuICBpZiAocHJvY2Vzcy5lbnYuREVWID09PSAnMScpIHtcbiAgICBtYWluV2luZG93LndlYkNvbnRlbnRzLm9wZW5EZXZUb29scygpXG4gIH1cblxuICBtYWluV2luZG93Lm9uKCdjbG9zZWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgbWFpbldpbmRvdyA9IG51bGxcbiAgfSlcbn1cblxuYXBwLm9uKCdyZWFkeScsIGNyZWF0ZVdpbmRvdylcblxuYXBwLm9uKCd3aW5kb3ctYWxsLWNsb3NlZCcsIGZ1bmN0aW9uICgpIHtcbiAgaWYgKHByb2Nlc3MucGxhdGZvcm0gIT09ICdkYXJ3aW4nKSB7XG4gICAgYXBwLnF1aXQoKVxuICB9XG59KVxuXG5hcHAub24oJ2FjdGl2YXRlJywgZnVuY3Rpb24gKCkge1xuICBpZiAobWFpbldpbmRvdyA9PT0gbnVsbCkge1xuICAgIGNyZWF0ZVdpbmRvdygpXG4gIH1cbn0pXG4iXX0=
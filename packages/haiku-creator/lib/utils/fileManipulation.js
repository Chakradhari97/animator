'use strict';

var https = require('https');
var fs = require('fs');

var _require = require('child_process'),
    exec = _require.exec;

module.exports = {
  download: function download(url, downloadPath, onProgress) {
    var file = fs.createWriteStream(downloadPath);

    return new Promise(function (resolve, reject) {
      https.get(url, function (response) {
        var contentLenght = parseInt(response.headers['content-length'], 10);
        var progress = 0;

        response.pipe(file);

        response.on('data', function (data) {
          progress += data.length;
          onProgress(progress * 100 / contentLenght);
        });

        response.on('error', function (error) {
          fs.unlink(downloadPath);
          reject(error);
        });

        file.on('finish', function () {
          file.close(resolve);
        });
      });
    });
  },
  unzip: function unzip(zipPath, destination) {
    return new Promise(function (resolve, reject) {
      exec('unzip -o -qq ' + zipPath + ' -d ' + destination + ' && open -a /Applications/Haiku.app $1', {}, function (err) {
        if (err) reject(err);
        resolve(true);
      });
    });
  }
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91dGlscy9maWxlTWFuaXB1bGF0aW9uLmpzIl0sIm5hbWVzIjpbImh0dHBzIiwicmVxdWlyZSIsImZzIiwiZXhlYyIsIm1vZHVsZSIsImV4cG9ydHMiLCJkb3dubG9hZCIsInVybCIsImRvd25sb2FkUGF0aCIsIm9uUHJvZ3Jlc3MiLCJmaWxlIiwiY3JlYXRlV3JpdGVTdHJlYW0iLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImdldCIsImNvbnRlbnRMZW5naHQiLCJwYXJzZUludCIsInJlc3BvbnNlIiwiaGVhZGVycyIsInByb2dyZXNzIiwicGlwZSIsIm9uIiwiZGF0YSIsImxlbmd0aCIsInVubGluayIsImVycm9yIiwiY2xvc2UiLCJ1bnppcCIsInppcFBhdGgiLCJkZXN0aW5hdGlvbiIsImVyciJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFNQSxRQUFRQyxRQUFRLE9BQVIsQ0FBZDtBQUNBLElBQU1DLEtBQUtELFFBQVEsSUFBUixDQUFYOztlQUNlQSxRQUFRLGVBQVIsQztJQUFSRSxJLFlBQUFBLEk7O0FBRVBDLE9BQU9DLE9BQVAsR0FBaUI7QUFDZkMsVUFEZSxvQkFDTEMsR0FESyxFQUNBQyxZQURBLEVBQ2NDLFVBRGQsRUFDMEI7QUFDdkMsUUFBTUMsT0FBT1IsR0FBR1MsaUJBQUgsQ0FBcUJILFlBQXJCLENBQWI7O0FBRUEsV0FBTyxJQUFJSSxPQUFKLENBQVksVUFBQ0MsT0FBRCxFQUFVQyxNQUFWLEVBQXFCO0FBQ3RDZCxZQUFNZSxHQUFOLENBQVVSLEdBQVYsRUFBZSxvQkFBWTtBQUN6QixZQUFNUyxnQkFBZ0JDLFNBQVNDLFNBQVNDLE9BQVQsQ0FBaUIsZ0JBQWpCLENBQVQsRUFBNkMsRUFBN0MsQ0FBdEI7QUFDQSxZQUFJQyxXQUFXLENBQWY7O0FBRUFGLGlCQUFTRyxJQUFULENBQWNYLElBQWQ7O0FBRUFRLGlCQUFTSSxFQUFULENBQVksTUFBWixFQUFvQixnQkFBUTtBQUMxQkYsc0JBQVlHLEtBQUtDLE1BQWpCO0FBQ0FmLHFCQUFXVyxXQUFXLEdBQVgsR0FBaUJKLGFBQTVCO0FBQ0QsU0FIRDs7QUFLQUUsaUJBQVNJLEVBQVQsQ0FBWSxPQUFaLEVBQXFCLGlCQUFTO0FBQzVCcEIsYUFBR3VCLE1BQUgsQ0FBVWpCLFlBQVY7QUFDQU0saUJBQU9ZLEtBQVA7QUFDRCxTQUhEOztBQUtBaEIsYUFBS1ksRUFBTCxDQUFRLFFBQVIsRUFBa0IsWUFBTTtBQUN0QlosZUFBS2lCLEtBQUwsQ0FBV2QsT0FBWDtBQUNELFNBRkQ7QUFHRCxPQW5CRDtBQW9CRCxLQXJCTSxDQUFQO0FBc0JELEdBMUJjO0FBNEJmZSxPQTVCZSxpQkE0QlJDLE9BNUJRLEVBNEJDQyxXQTVCRCxFQTRCYztBQUMzQixXQUFPLElBQUlsQixPQUFKLENBQVksVUFBQ0MsT0FBRCxFQUFVQyxNQUFWLEVBQXFCO0FBQ3RDWCw2QkFDa0IwQixPQURsQixZQUNnQ0MsV0FEaEMsNkNBRUUsRUFGRixFQUdFLGVBQU87QUFDTCxZQUFJQyxHQUFKLEVBQVNqQixPQUFPaUIsR0FBUDtBQUNUbEIsZ0JBQVEsSUFBUjtBQUNELE9BTkg7QUFRRCxLQVRNLENBQVA7QUFVRDtBQXZDYyxDQUFqQiIsImZpbGUiOiJmaWxlTWFuaXB1bGF0aW9uLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgaHR0cHMgPSByZXF1aXJlKCdodHRwcycpXG5jb25zdCBmcyA9IHJlcXVpcmUoJ2ZzJylcbmNvbnN0IHtleGVjfSA9IHJlcXVpcmUoJ2NoaWxkX3Byb2Nlc3MnKVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgZG93bmxvYWQgKHVybCwgZG93bmxvYWRQYXRoLCBvblByb2dyZXNzKSB7XG4gICAgY29uc3QgZmlsZSA9IGZzLmNyZWF0ZVdyaXRlU3RyZWFtKGRvd25sb2FkUGF0aClcblxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBodHRwcy5nZXQodXJsLCByZXNwb25zZSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbnRlbnRMZW5naHQgPSBwYXJzZUludChyZXNwb25zZS5oZWFkZXJzWydjb250ZW50LWxlbmd0aCddLCAxMClcbiAgICAgICAgbGV0IHByb2dyZXNzID0gMFxuXG4gICAgICAgIHJlc3BvbnNlLnBpcGUoZmlsZSlcblxuICAgICAgICByZXNwb25zZS5vbignZGF0YScsIGRhdGEgPT4ge1xuICAgICAgICAgIHByb2dyZXNzICs9IGRhdGEubGVuZ3RoXG4gICAgICAgICAgb25Qcm9ncmVzcyhwcm9ncmVzcyAqIDEwMCAvIGNvbnRlbnRMZW5naHQpXG4gICAgICAgIH0pXG5cbiAgICAgICAgcmVzcG9uc2Uub24oJ2Vycm9yJywgZXJyb3IgPT4ge1xuICAgICAgICAgIGZzLnVubGluayhkb3dubG9hZFBhdGgpXG4gICAgICAgICAgcmVqZWN0KGVycm9yKVxuICAgICAgICB9KVxuXG4gICAgICAgIGZpbGUub24oJ2ZpbmlzaCcsICgpID0+IHtcbiAgICAgICAgICBmaWxlLmNsb3NlKHJlc29sdmUpXG4gICAgICAgIH0pXG4gICAgICB9KVxuICAgIH0pXG4gIH0sXG5cbiAgdW56aXAgKHppcFBhdGgsIGRlc3RpbmF0aW9uKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGV4ZWMoXG4gICAgICAgIGB1bnppcCAtbyAtcXEgJHt6aXBQYXRofSAtZCAke2Rlc3RpbmF0aW9ufSAmJiBvcGVuIC1hIC9BcHBsaWNhdGlvbnMvSGFpa3UuYXBwICQxYCxcbiAgICAgICAge30sXG4gICAgICAgIGVyciA9PiB7XG4gICAgICAgICAgaWYgKGVycikgcmVqZWN0KGVycilcbiAgICAgICAgICByZXNvbHZlKHRydWUpXG4gICAgICAgIH1cbiAgICAgIClcbiAgICB9KVxuICB9XG59XG4iXX0=
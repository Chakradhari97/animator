{"version":3,"sources":["../../src/envoy/handleExporterChannel.js"],"names":["exporterChannel","activeComponent","on","request","contents","fetchActiveBytecodeFile","getReifiedBytecode","writeFile","filename","err","saved"],"mappings":";;;;;;AAAA;;;;AAEA;;AACA;;;;kBAEe,UAACA,eAAD,EAAkBC,eAAlB,EAAsC;AACnDD,kBAAgBE,EAAhB,uCAA+C,UAACC,OAAD,EAAa;AAC1D,QAAMC,WAAW,0CACfD,OADe,EACNF,gBAAgBI,uBAAhB,GAA0CC,kBAA1C,EADM,CAAjB;AAEA,iBAAGC,SAAH,CAAaJ,QAAQK,QAArB,EAA+BJ,QAA/B,EAAyC,UAACK,GAAD,EAAS;AAChD,UAAIA,GAAJ,EAAS;AACP,cAAMA,GAAN;AACD;;AAEDT,sBAAgBU,KAAhB,CAAsBP,OAAtB;AACD,KAND;AAOD,GAVD;AAWD,C","file":"handleExporterChannel.js","sourcesContent":["import fs from 'fs'\n\nimport { EXPORTER_CHANNEL } from 'haiku-sdk-creator/lib/exporter'\nimport { handleExporterSaveRequest } from 'haiku-formats/lib/exporters'\n\nexport default (exporterChannel, activeComponent) => {\n  exporterChannel.on(`${EXPORTER_CHANNEL}:save`, (request) => {\n    const contents = handleExporterSaveRequest(\n      request, activeComponent.fetchActiveBytecodeFile().getReifiedBytecode())\n    fs.writeFile(request.filename, contents, (err) => {\n      if (err) {\n        throw err\n      }\n\n      exporterChannel.saved(request)\n    })\n  })\n}\n"]}
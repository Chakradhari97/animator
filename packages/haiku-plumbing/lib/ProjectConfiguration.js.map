{"version":3,"sources":["../src/ProjectConfiguration.js"],"names":["CONFIGURATION_PATH","DEFAULTS","ProjectConfiguration","folder","cb","abspath","join","err","loaded","Error","config","set"],"mappings":";;;;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;;;;;;;;;AAEA,IAAMA,qBAAqB,UAA3B;AACA,IAAMC,WAAW,EAAjB,C,CAAoB;;IAECC,oB;;;;;;;;;;;yBACbC,M,EAAQC,E,EAAI;AAAA;;AAChB,UAAMC,UAAU,eAAKC,IAAL,CAAUH,MAAV,EAAkBH,kBAAlB,CAAhB;AACA,aAAO,2BAAYK,OAAZ,EAAqB,UAACE,GAAD,EAAMC,MAAN,EAAiB;AAC3C,YAAID,GAAJ,EAAS,OAAOH,GAAGG,GAAH,CAAP;AACT,YAAI,CAACC,MAAL,EAAa,OAAOJ,GAAG,IAAIK,KAAJ,CAAU,mCAAV,CAAH,CAAP;AACb,YAAMC,SAAS,sBAAO,EAAP,EAAWT,QAAX,EAAqBO,MAArB,CAAf;;AAEA;AACA,eAAKG,GAAL,CAAS,QAAT,EAAmBD,MAAnB;;AAEA,eAAON,GAAG,IAAH,SAAP;AACD,OATM,CAAP;AAUD;;;;;;kBAbkBF,oB","file":"ProjectConfiguration.js","sourcesContent":["import path from 'path'\nimport assign from 'lodash.assign'\nimport safeRequire from './safeRequire'\nimport StateObject from 'haiku-state-object'\n\nconst CONFIGURATION_PATH = 'haiku.js'\nconst DEFAULTS = {} // ?\n\nexport default class ProjectConfiguration extends StateObject {\n  load (folder, cb) {\n    const abspath = path.join(folder, CONFIGURATION_PATH)\n    return safeRequire(abspath, (err, loaded) => {\n      if (err) return cb(err)\n      if (!loaded) return cb(new Error('Cannot find project configuration'))\n      const config = assign({}, DEFAULTS, loaded)\n\n      // Object.defineProperty(this, 'config', { value: config })\n      this.set('config', config)\n\n      return cb(null, this)\n    })\n  }\n}\n"]}
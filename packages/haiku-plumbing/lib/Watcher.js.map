{"version":3,"sources":["../src/Watcher.js"],"names":["Watcher","entry","watcher","watch","ignored","ignoreInitial","persistent","usePolling","alwaysStat","on","emit","bind","path","maybeStats","close"],"mappings":";;;;;;;;AAAA;;;;AACA;;;;;;;;;;IAEqBA,O;;;;;;;;;;;0BACZC,K,EAAO;AAAA;;AACZ,WAAKC,OAAL,GAAe,mBAASC,KAAT,CAAeF,KAAf,EAAsB;AACnC;AACA;AACAG,iBAAS,8DAH0B;AAInCC,uBAAe,IAJoB;AAKnCC,oBAAY,IALuB;AAMnCC,oBAAY,IANuB;AAOnC;AACAC,oBAAY;AARuB,OAAtB,CAAf;;AAWA,WAAKN,OAAL,CAAaO,EAAb,CAAgB,KAAhB,EAAuB,KAAKC,IAAL,CAAUC,IAAV,CAAe,IAAf,EAAqB,KAArB,CAAvB;AACA,WAAKT,OAAL,CAAaO,EAAb,CAAgB,QAAhB,EAA0B,UAACG,IAAD,EAAOC,UAAP,EAAsB;AAC9C,eAAKH,IAAL,CAAU,QAAV,EAAoBE,IAApB,EAA0BC,UAA1B;AACD,OAFD;AAGA,WAAKX,OAAL,CAAaO,EAAb,CAAgB,QAAhB,EAA0B,KAAKC,IAAL,CAAUC,IAAV,CAAe,IAAf,EAAqB,QAArB,CAA1B;AACA,WAAKT,OAAL,CAAaO,EAAb,CAAgB,OAAhB,EAAyB,KAAKC,IAAL,CAAUC,IAAV,CAAe,IAAf,EAAqB,OAArB,CAAzB;AACD;;;2BAEO;AACN,WAAKT,OAAL,CAAaY,KAAb;AACD;;;;;;kBAvBkBd,O","file":"Watcher.js","sourcesContent":["import chokidar from 'chokidar'\nimport { EventEmitter } from 'events'\n\nexport default class Watcher extends EventEmitter {\n  watch (entry) {\n    this.watcher = chokidar.watch(entry, {\n      // - Avoid any git blobs (there are tons of these)\n      // - Avoid any sketch tempfiles (these are ephemeral and not needed)\n      ignored: /(node_modules|bower_components|jspm_modules|\\.git|~\\.sketch)/,\n      ignoreInitial: true,\n      persistent: true,\n      usePolling: true,\n      // awaitWriteFinish: true, // Truthy delays emissions for larger files\n      alwaysStat: true\n    })\n\n    this.watcher.on('add', this.emit.bind(this, 'add'))\n    this.watcher.on('change', (path, maybeStats) => {\n      this.emit('change', path, maybeStats)\n    })\n    this.watcher.on('unlink', this.emit.bind(this, 'remove'))\n    this.watcher.on('error', this.emit.bind(this, 'error'))\n  }\n\n  stop () {\n    this.watcher.close()\n  }\n}\n"]}